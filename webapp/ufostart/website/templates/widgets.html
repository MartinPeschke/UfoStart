<%def name="company_logo(company)">${self.logo(company.logo_url, company.name, link = url("website_company", slug = company.slug))}</%def>
<%def name="app_company_logo(application)">${self.logo(application.comapnyLogo, application.companyName, link = url("website_company", slug = application.companySlug))}</%def>
<%def name="product_logo(company)">${self.logo(company.product_picture, company.product_name, link = url("website_company_product", slug = company.slug))}</%def>

<%def name="logo(url, alt='', classes='', link = '')">
%if url and link:
<div class="logo-picture ${classes}"><a href="${link}"><img src="${url}" alt="${alt}"/></a></div>\
%elif url:
<div class="logo-picture ${classes}"><img src="${url}" alt="${alt}"/></div>\
%else:
<div class="logo-picture empty ${classes}"></div>\
%endif
</%def>


<%def name="login_btn(name)">
<a href="${url('website_login_login', traverse = [name], _query=[('furl', request.url)])}" class="btn btn-primary btn-linkedin">Log in with ${name.title()}</a>
</%def>


<%def name="valuation(need)">
    <div class="valuation">
        <div class="number total">
            <strong>VALUE</strong>
            <h2><strong>${need.display_total}</strong></h2>
        </div>
        <div class="secondary">
            <div class="number equity">
                <strong>Equity</strong>
                <h2>${need.display_mix}</h2>
            </div>
            <div class="number cash">
                <strong>Cash</strong>
                <h2>${need.display_cash}</h2>
            </div>
        </div>
    </div>
</%def>


<%def name="publicNeedCard(need, descr_len = 50)">
    <%
        need_url = url("website_round_need", slug = need.Company.slug, need = need.token)
    %>
    <div class="need-card home">
    <div class="need-card-inner">
        <div class="row">
            <div class="col col-sm-3" style="margin-top:10px">
                <a href="${url("website_company", slug = need.Company.slug)}"><img src="${need.Company.logo}"></a>
            </div>
            <div class="col col-sm-9">
                <h5><a href="${need_url}" class="overflow">${need.Company.name}</a></h5>
                <div class="description">${need.Company.description | html.trunc(50)}</div>
            </div>
        </div>
        <h5><a href="${need_url}">${need.name}</a></h5>
        <div class="long-description">${html.coalesce(need.customText, need.summary) | html.trunc(descr_len)}</div>

        ${self.valuation(need)}

        <div class="label-list">
            %for tag in need.tags:
                <span class="label label-info spaced text-small">${tag}</span>
            %endfor
        </div>
    </div>
    </div>
</%def>



<%def name="publicProductCard(company, descr_len = 50)">
    <%
        product_url = url("website_company_product", slug = company.slug)
    %>
    <div class="need-card home product">
    <div class="need-card-inner">
        <div class="picture maxi">
            <img src="${company.product_picture}"/>
        </div>
        <h5><a href="${product_url}" class="overflow">${company.product_name}</a></h5>
        <div class="long-description">${company.product_description | html.trunc(descr_len)}</div>
        %if company.no_pledgees:
            <div class="valuation">
                <div class="number total">
                    <strong>PLEDGES</strong>
                    <h2><strong>${company.no_pledgees or ''}</strong></h2>
                </div>
            </div>
        %else:
            <div class="valuation">
                <div class="number total">
                    <strong>&nbsp;</strong>
                    <h2><strong>&nbsp;</strong></h2>
                </div>
            </div>
        %endif
    </div>
    </div>
</%def>


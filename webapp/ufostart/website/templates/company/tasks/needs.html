<%inherit file="../../layout.html"/>
<%namespace file="hnc:forms/templates/baseform.html" name="baseform"/>


<%def name="header_buttons()">
    <a href="${url("website_need_library", token = "NOTOKEN")}" class="btn btn-primary">Add a Need</a>
</%def>

<%def name="pageTitle()"><div class="page-header">${template.name} <span class="template-icon ${template.getStyleKey()}"></span> </div></%def>


<%def name="content()">
    <div class="container round-need-setup-page">
        <div class="row">
                <h6>Needs to be fulfilled in 90 days</h6>
                ${self.buildForm(view.form, values.get(view.form.id), errors.get(view.form.id), btnClass='btn btn-primary col col-lg-12')}
            </div>
        </div>
    </div>
</%def>

<%def name="buildForm(form, values, errors, btnClass='btn-primary')">
    <form class="${form.classes}" method="post" id="${form.id}">
        ${baseform.prelims(form)}

        %for category in view.getTaskCategories():
            <div class="col col-lg-3">
                <h5 class="box-title">${category.name}</h5>
                <div class="needs-list box-shaded">
                %for need in template.Need:
                    ${self.renderNeed(form.id, need, False)}
                %endfor
                </div>
            </div>
        %endfor


        <div class="col col-lg-4 col-offset-4 mar-top-2">
            <button type="submit" class="btn btn-primary btn-humonguous"><span>Start the Round</span></button>
            <p class="text-center">You have 90 days to finish the round</p>
        </div>
    </form>
</%def>

<%def name="renderNeed(prefix, need, isAdd = False)">
<div class="single-need" data-entity-sort="${need.name}">
    <div class="single-need-inner">
        %if isAdd:
            <a class="add-remove-btn add"><span>+</span></a>
        %else:
            <a class="add-remove-btn remove"><span>Ã—</span></a>
        %endif

        <div class="need-title">${need.name}</div>
        <div class="need-description">Dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. </div>
    </div>
</div>
</%def>

<%def name="pre_scripts()">
    <script src="${ROOT_STATIC_URL}scripts/dist/jquery.qtip.min.js"></script>
</%def>
<%def name="post_scripts()">
    <script>
        require(["views/company/round/needs"], function(View){
            new View({el: $(".round-need-setup-page")})
        })
    </script>
</%def>
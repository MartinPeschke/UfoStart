<%inherit file="../layout.html"/>
<%namespace file="hnc:forms/templates/baseform.html" name="baseform"/>

<%def name="pageTitle()"><div class="page-header">Round 1</div></%def>


<%def name="content()">
    <div class="container container-constricted round-need-setup-page">
        <div class="row">
            <div class="col col-lg-12">
                <div class="needs-list in-use">
                %for need in companyRound.Needs:
                    ${self.renderNeed(need)}
                %endfor
                </div>
            </div>
        </div>
    </div>
</%def>

<%def name="renderNeed(need)">
<div class="single-need">
    <div class="single-need-inner round-need-setup-outer">
        <div class="row">
            <div class="col col-lg-6">
                <div class="need-title">${need.name}</div>
                <div class="need-description">Dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore.</div>
                <div class="need-details">
                    <div class="need-detail link-pointer" data-description="Sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua.">
                    Detail 1</div><div class="need-detail link-pointer" data-description="Sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua.">
                    Detail 2</div><div class="need-detail link-pointer" data-description="Sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua.">
                    Detail 3
                    </div>
                </div>
            </div>
            <div class="col col-lg-6 text-center">
                %if need.isExpert:
                    <div class="row round-need-setup expert loading" data-need="${need.key}">
                        <img class="show-loading" src="${ROOT_STATIC_URL}img/ajax-loader.gif"/>
                    </div>
                %endif
                %if need.Service:
                    <div class="row round-need-setup services">
                        ${self.renderService(need.Service)}
                    </div>
                %endif
                %if not need.Expert and not need.Service:
                    <a class="btn btn-info btn-small information-btn" data-description="Sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua.">Info</a>
                %endif
            </div>
        </div>
    </div>
</div>
</%def>


<%def name="renderService(service)">
    <div class="col col-sm-5">
        <img src="${service.getWorkerPicture()}" class="img-thumbnail mini"/>
        <div class="expert-title">Crowd worker</div>
        <p class="expert-name">${service.getWorkerName()}</p>
    </div>
    <span class="linking-arrow"></span>
    <div class="col col-sm-5">
        <img src="${STATIC_URL}img/cloudservices.png" class=""/>
        <div class="expert-title">Services</div>
        <div class="service-url" >${service.name}</div>
    </div>
    <div class="col col-sm-2">
        <a href="${service.url}" target="_blank" class="btn btn-primary btn-small use-service-btn">Go</a>
    </div>
</%def>


<%def name="pre_scripts()">
    <script src="${ROOT_STATIC_URL}scripts/dist/jquery.qtip.min.js"></script>
</%def>
<%def name="post_scripts()">
    <script type="text/template" id="expert-template">
        <div class="col col-sm-5 need-expert-box">
            <img src="{{ model.getIntroPicture() }}" class="img-thumbnail mini"/>
            <div class="expert-title">Introducer</div>
            <p class="expert-name">{{ model.getIntroName() }}</p>
        </div>
        <span class="linking-arrow"></span>
        <div class="col col-sm-5 need-expert-box">
            <img src="{{ model.getExpertPicture() }}" class="img-thumbnail mini"/>
            <div class="expert-title">Expert</div>
            <p class="expert-name">{{ model.getExpertName() }}</p>
        </div>
        <div class="col col-sm-2"><a class="envelop-btn need-expert-btn">Go</a></div>
    </script>

    <script>
        require(["views/company/round/configure"], function(View){
            var view = new View({el: $(".round-need-setup-page")});
            view.render('${companyRound.token}');
        })
    </script>
</%def>
<%inherit file="../../layout.html"/>
<%namespace file="hnc:forms/templates/baseform.html" name="baseform"/>
<%namespace file="../../widgets.html" name="widgets"/>

<%def name="pageTitle()"><div class="page-header">${vctxt.company.display_name}</div></%def>

<%def name="content()">
    <div class="container">
        <div class="row mar-top-1">
            <div class="col col-lg-6">
                    ${self.buildPrivateNeed(vctxt.need)}
            </div>
            <div class="col col-lg-6">
                <div class="box-framed">
                    <div class="box-title">
                        Recommended Solutions
                    </div>
                    <div class="box-content">
                        ${self.privateInfoBox(vctxt.company, vctxt.need)}
                    </div>
                </div>
            </div>
        </div>
        <div class="row mar-top-2">
            <div class="col col-lg 12">
                <div class="box-title">
                    Applications
                </div>
            </div>
        </div>
    </div>
</%def>

<%def name="buildPrivateNeed(need)">
    <div class="box-framed">
        <div class="box-title">
            <a href="${url("website_round_need_edit", **vctxt.urlArgs)}" class="btn btn-primary">Edit</a>
            ${vctxt.need.name}
        </div>
        <div class="box-content">
        <div class="description mar-top-1">
            %if need.picture:
                <div class="picture need empty">
                    <img src="${need.picture}"/>

                </div>
            %endif
            ${vctxt.need.description}
        </div>
        <h5 class="text-muted">
            Related Tags
        </h5>
        <div class="label-list">
            %for tag in need.tags:
                <span class="label label-info spaced text-small">${tag}</span>
            %endfor
        </div>
        </div>
    </div>
</%def>

<%def name="privateInfoBox(company, need)">

    %if need.first_level_expert:
        <div class="experts">
            <h5 class="text-muted upper">Recommended Experts in your network</h5>
            <div class="expert-pile row">
                %for expert in need.first_level_expert:
                    <div class="col col-lg-4 expert-briefing">
                        <div class="picture medium">
                            <img src="${expert.picture}" alt="${expert.name}"/>
                        </div>
                        <a href="#"><strong>${expert.name}</strong></a>
                        <p class="text-muted text-small">${expert.position}</p>
                        <p class="expert-skills"><strong>${expert.display_skills}</strong></p>
                        <img src="${STATIC_URL}img/stars.png" class="stars"/>
                        <a href="#" class="btn btn-primary btn-small btn-block ">Send Message</a>
                    </div>
                %endfor
            </div>
        </div>
    %endif

    %if need.second_level_expert:
    <div class="experts">
        <h5 class="text-muted no-margin upper mar-top-2">Recommended Experts and people who can introduce you</h5>
        <div class="expert-pile">
                %for expert in need.second_level_expert:
                    <div class="expert-briefing row">
                        <div class="col col-lg-4">
                            <h6 class="text-muted">Expert</h6>
                            <div class="picture medium">
                                <img src="${expert.picture}" alt="${expert.name}"/>
                            </div>
                            <a href="#"><strong>${expert.name}</strong></a>
                            <p class="text-muted text-small">${expert.position}</p>
                            <p class="expert-skills"><strong>${expert.display_skills}</strong></p>
                            <img src="${STATIC_URL}img/stars.png" class="stars"/>
                        </div>
                        <div class="col col-lg-8">
                            <h6 class="text-muted">Introducers</h6>
                            %for intro in expert.introducers:
                            <div class="row mar-top-half">
                                <div class="col col-lg-2">
                                    <div class="picture mini">
                                        <img src="${intro.picture}" alt="${intro.name}"/>
                                    </div>
                                </div>
                                <div class="col col-lg-4">
                                    <a href="#"><strong>${expert.name}</strong></a>
                                    <p class="text-muted text-small">${expert.position}</p>
                                </div>
                                <div class="col col-lg-6">
                                    <a href="#" class="btn btn-primary btn-small btn-block ">Get Introduction</a>
                                </div>
                            </div>
                            %endfor
                        </div>
                    </div>
                %endfor
            </div>
        </div>
    %endif

    <h5 class="text-muted no-margin upper mar-top-2">Recommended Cloud Services</h5>
    <div class="service-list row">
    %for service in need.services:
        <div class="col col-lg-4 service-briefing">
            <div class="picture">
                <img src="${service.logo_picture}" name="${service.name}"/>
            </div>
            <a href="#"><strong>${service.name}</strong></a>
            <p class="text-muted text-small">${service.short_description}</p>
            <img src="${STATIC_URL}img/stars.png" class="stars"/>
            <a href="${service.url}" target="_blank" class="btn btn-small btn-block btn-primary">See Details</a>
        </div>
    %endfor
    </div>
</%def>



<%def name="publicInfoBox(company, need)">
    <div class="box-title">
        Info
    </div>
    <div class="box-content">
    <div class="valuation">
        <div class="primary-number pull-right">
            ${need.equity_mix}%
            <div class="legend">Equity</div>
        </div>
        <div class="primary-number">
            ${need.money_value}
            <div class="legend">Value</div>
        </div>
    </div>
    <h5 class="upper text-muted">
        Company
    </h5>
    <div class="row">
        <div class="col col-lg-3">
            ${widgets.logo(company.logo_picture)}
        </div>
        <div class="col col-lg-6">
            <a href="${url("website_company", **vctxt.urlArgs)}"><strong>${company.display_name}</strong></a>
            <div class="tagline">${company.display_description}</div>
            <a href="${url("website_company", **vctxt.urlArgs)}"><small>More...</small></a>
        </div>
        <div class="col col-lg-3">
            <h5 class="text-muted no-margin">Team members</h5>
            <h5 class="no-margin brand-primary">${company.no_users}</h5>
        </div>
    </div>
    <h5 class="upper text-muted">
        Product
    </h5>
    <div class="row">
        <div class="col col-lg-3">
            ${widgets.logo(company.product_picture)}
        </div>
        <div class="col col-lg-6">
            <a href="${url("website_company_product", **vctxt.urlArgs)}"><strong>${company.product_name}</strong></a>
            <div class="description">${company.product_description}</div>
            <a href="${url("website_company_product", **vctxt.urlArgs)}"><small>More...</small></a>
        </div>
        <div class="col col-lg-3">
            <h5 class="text-muted no-margin">Pledges</h5>
            <h5 class="no-margin brand-primary">${company.no_pledgees}</h5>
        </div>
    </div>
    </div>
</%def>
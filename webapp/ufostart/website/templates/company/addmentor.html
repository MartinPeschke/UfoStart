<%inherit file="../layout.html"/>
<%namespace file="hnc:forms/templates/baseform.html" name="baseform"/>
<%namespace file="../widgets.html" name="widgets"/>


<%def name="content()">
    <div class="container">
        <div class="row">
            <div class="col col-lg-12">
                <h1 class="section-title">
                    <span class="brand-primary">Add a Mentor</span>
                </h1>
            </div>
        </div>
        <div class="row mar-top-1">
            <div class="col col-lg-7">
                ${self.topMentors(mentors)}
                ${self.build_form(view.form, values, errors)}
            </div>
            <div class="col col-lg-3 col-offset-2">
                <div class="wtf-box">
                    <h2 class="wtf-title">
                        Why do I need to add a Mentor?
                    </h2>
                    <div class="wtf-content">
                        Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua.
                    </div>
                </div>
            </div>
        </div>
    </div>
</%def>

<%def name="topMentors(mentors)">
    <div class="box-dark">
        <div class="box-content">

            <div class="mentor-list">
                %for mentor in mentors:
                    <div class="single-mentor">
                        <div class="box-card extra-compact">

                            ${widgets.profile_pic(mentor.picture, mentor.token)}
                            <div class="right-box">
                                <div class="row">
                                    <div class="col col-lg-6">
                                        <a href="${root.profile_url(mentor.token)}" class="entity-link">${mentor.name}</a>
                                        <p class="text-small">${mentor.headline}</p>
                                        <a class="btn btn-primary btn-small">Invite as Mentor</a>
                                    </div>
                                    <div class="col col-lg-6">
                                        %if mentor.Companies:
                                        <h6>Mentor for these Startups</h6>
                                        <div class="face-pile-mini">
                                            %for company in mentor.Companies:
                                                <div class="picture micro">
                                                    <a href="${root.company_url(company.slug)}"><img src="${company.logo}"/></a>
                                                </div>
                                            %endfor
                                        </div>
                                        %endif
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                %endfor
            </div>

        </div>
    </div>
</%def>


<%def name="build_form(form, values, errors)">
    <div class="box-dark">
        <div class="box-content">
            <form class="${form.grid.form_classes}" id="${form.id}" method="POST">
                ${baseform.prelims(form)}
                ${form.fieldMap['name'].render(form.id, request, values.get(form.id), errors.get(form.id), view)|n}
                ${form.fieldMap['email'].render(form.id, request, values.get(form.id), errors.get(form.id), view)|n}
                ${form.fieldMap['role'].render(form.id, request, dict(role = form.role), errors, view)|n}
                <div class="mar-top-1">
                    <button type="submit" class="btn btn-primary">Invite Mentor</button>
                    <a href="${url(ctxt)}" class="btn btn-default">Cancel</a>
                </div>
            </form>
        </div>
    </div>
</%def>

<%def name="post_scripts()">
    <script>
        require(["tools/ajax"], function(ajax){
            $(".form-validated").each(function(idx, form){
                ajax.ifyForm({root: $(form)});
            })
        });
    </script>
</%def>
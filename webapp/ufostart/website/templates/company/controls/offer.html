<%!
    from itertools import izip_longest
%>

<div data-closure="form" ${'data-required="true"' if widget.attrs.required else ''|n} class="repeatable-form">
    <div class="row">
    <div class="col col-lg-9">
    %for j, (values, errors) in enumerate(izip_longest(value or [{}], getattr(error, "error_list", [{}]), fillvalue = {})):
        <div class="${widget.getClasses()}" data-sequence="${j}">
            %if widget.label:
                <span class="embedded-from-label">
                    ${widget.getLabel(request)|n} <span class="numbering">${j+1}</span>
                </span>
            %endif
            %for field in widget.fields:
                ${field.render('{}-{}'.format(prefix, j), request, values, errors, grid=grid)|n}
            %endfor
        </div>
    %endfor
    </div>
    <div class="col col-lg-3 add-more">
        <a href="#" class="btn btn-default btn-block glyphicon-plus add-more-link">${widget.add_more_link_label|n}</a>
    </div>
    </div>
</div>
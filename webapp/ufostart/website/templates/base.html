<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title><%block name="title">${self.subtitle()} ${g.project_name}</%block></title>
    <meta name="Generator" content="${g.project_name}">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1">
    <meta name="MobileOptimized" content="width">
    <meta name="HandheldFriendly" content="true">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta http-equiv="cleartype" content="on">
    <meta itemprop="name" content="${g.project_name}">
    <meta itemprop="description" content="${g.site_slogan}">
    ${self.seo_tags()}
    <link href='//fonts.googleapis.com/css?family=Open+Sans:300,400,600' rel='stylesheet' type='text/css'>
    ${self.extra_head()}
    %if g.is_debug:
        <script type="text/javascript">less = { env: 'development' };</script>
        <link rel="stylesheet/less" href="${STATIC_URL}less/site.less">
        ${self.styles_debug()}
        <script src="${ROOT_STATIC_URL}scripts/dev/less.js" type="text/javascript"></script>
    %else:
        <link rel="stylesheet" type="text/css" href="${STATIC_URL}/css/site.min.css?${VERSION_TOKEN}">
        ${self.styles_live()}
    %endif
</head>
<body class="${self.body_class()}">
    ${next.body()}
    <div id="fb-root"></div>
    ${self.scripts()}
</body>
</html>

<%def name="subtitle()"></%def>
<%def name="styles_live()"></%def>
<%def name="styles_debug()"></%def>
<%def name="seo_tags()"></%def>
<%def name="extra_head()"></%def>
<%def name="body_class()"></%def>
<%def name="page_class()"></%def>



<%def name="pre_scripts()"></%def>
<%def name="post_scripts()"></%def>
<%def name="layout_scripts()"></%def>
<%def name="jsoptions()">
    <script>
        window.__options__ = {
            socials : {}
            , user : ${vctxt.user.toJSON(True)|n}
            , messagingContainer: "#message-container"
            , staticPrefix: '${ROOT_STATIC_URL}'
            , loadingHtml : '<div class="show-loading"><img src="${ROOT_STATIC_URL}/img/ajax-loader-light.gif"/></div>'
        };
    </script>
</%def>

<%def name="scripts()">
    <script>
        var require = {
            urlArgs: "${VERSION_TOKEN}"
            , baseUrl: "${STATIC_URL}scripts"
            , paths : {
                "tools"     :"${ROOT_STATIC_URL}scripts/tools"
                ,"text"     :"${ROOT_STATIC_URL}scripts/text"
                ,"ajax/templates":"/ajax/templates"
            }};
    </script>
    ${self.jsoptions()}
     <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script src="${ROOT_STATIC_URL}scripts/dist/libs.min.js?${VERSION_TOKEN}"></script><script>_.templateSettings = {interpolate : /\{\{ (.+?) \}\}/g, evaluate: /\{% (.+?) %\}/g};</script>
    ${self.pre_scripts()}
    <script data-main="site"  src="${ROOT_STATIC_URL}scripts/dev/require.js" type="text/javascript"></script>

    ${self.layout_scripts()}
    ${self.post_scripts()}
</%def>


<%def name="header_messages()">
    <div id="message-container" class="container message-container ${'show' if len(request.session.peek_flash("generic_messages")) > 0 else ''}">
        %for msg in request.session.pop_flash("generic_messages"):
            <div class="alert alert-${msg.type}">
                <a class="close" data-dismiss="alert">Ã—</a>
                %if msg.heading:
                    <h4 class="alert-heading">${msg.heading|n}</h4>
                %endif
            ${msg.body|n}
            </div>
        %endfor
    </div>
</%def>